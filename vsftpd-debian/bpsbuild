.#!/usr/bin/env bash
version="3.0.5"
name="vsftpd"
depends="glibc,readline,ncurses"
description="sistem grub yükleme paketi"
source="https://security.appspot.com/downloads/vsftpd-3.0.5.tar.gz"
groups="sys.boot"
setup()
{
	cd $SOURCEDIR
	#ln -s /lib/x86_64-linux-gnu/libcap.so /lib64/libcap.so # derlemeden önce sudo yetkisiyle yapılmalı

}
build()
{
	make 
}
package()
{
	#make install DESTDIR=$DESTDIR
	DESTDIR=$DESTDIR
	#mkdir -p $DESTDIR/usr/local/sbin
	mkdir -p $DESTDIR/usr/sbin/
	if [ -x $DESTDIR/usr/local/sbin ]; then \
		install -m 755 $SOURCEDIR/vsftpd $DESTDIR/usr/local/sbin/vsftpd; \
	else \
		install -m 755 vsftpd $DESTDIR/usr/sbin/vsftpd; fi
	#mkdir -p $DESTDIR/usr/local/man/man8
	#mkdir -p $DESTDIR/usr/local/man/man5
	mkdir -p $DESTDIR/usr/share/man/man5
	mkdir -p $DESTDIR/usr/share/man/man8
	
	if [ -x $DESTDIR/usr/local/man ]; then \
		install -m 644 $SOURCEDIR/vsftpd.8 $DESTDIR/usr/local/man/man8/vsftpd.8; \
		install -m 644 $SOURCEDIR/vsftpd.conf.5 $DESTDIR/usr/local/man/man5/vsftpd.conf.5; \
	elif [ -x $DESTDIR/usr/share/man ]; then \
		install -m 644 $SOURCEDIR/vsftpd.8 $DESTDIR/usr/share/man/man8/vsftpd.8; \
		install -m 644 $SOURCEDIR/vsftpd.conf.5 $DESTDIR/usr/share/man/man5/vsftpd.conf.5; \
	else \
		install -m 644 $SOURCEDIR/vsftpd.8 $DESTDIR/usr/man/man8/vsftpd.8; \
		install -m 644 $SOURCEDIR/vsftpd.conf.5 /$DESTDIRusr/man/man5/vsftpd.conf.5; fi
	mkdir -p $DESTDIR/etc/xinetd.d 
	if [ -x $DESTDIR/etc/xinetd.d ]; then \
		install -m 644 $SOURCEDIR/xinetd.d/vsftpd $DESTDIR/etc/xinetd.d/vsftpd; fi
	mkdir -p $DESTDIR/etc/vsftpd
	if [ -x $DESTDIR/etc/vsftpd ]; then \
		install -m 644 $SOURCEDIR/vsftpd.conf $DESTDIR/etc/vsftpd/vsftpd.conf; fi
		

}

